# Template file for 'niri'
pkgname=niri
version=0.1.10
revision=1
build_style=cargo
configure_args="--no-default-features --features dinit,dbus,xdp-gnome-screencast"
hostmakedepends="pkg-config"
makedepends="eudev-libudev-devel libdisplay-info-devel libxkbcommon-devel libinput-devel pipewire-devel pango-devel libseat-devel clang libgbm-devel wayland-devel dbus-devel cairo-devel"
depends="eudev-libudev libdisplay-info libxkbcommon libinput libpipewire pango libseat libgbm wayland dbus cairo elogind mesa-dri"
short_desc="Scrollable-tiling Wayland compositor"
maintainer="Max D <d3m1gd@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/YaLTeR/niri"
changelog="https://github.com/YaLTeR/niri/releases"
distfiles="https://github.com/YaLTeR/niri/archive/refs/tags/v${version}.tar.gz"
checksum=2a6e6c21b05c14498eb84e58853c0a4c9d96d4215b8aec53388e89266fccca1b

post_install() {
	vconf resources/default-config.kdl niri/config.kdl
	vinstall resources/niri-portals.conf 0644 usr/share/xdg-desktop-portal
	vinstall resources/niri.desktop 0644 usr/share/wayland-sessions
}
